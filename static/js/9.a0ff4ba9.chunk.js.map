{"version":3,"sources":["Views/About.tsx","Model/Controller.tsx","Store/User.tsx","Store/Auth.tsx","Store/Image.tsx","Store/History.tsx","Store/index.tsx","Components/Header.tsx","Components/Layout.tsx"],"names":["fontColor","keyframes","Wrapper","styled","div","About","AV","init","appId","appKey","serverURL","Auth","register","userName","password","user","User","setUsername","setPassword","Promise","resolve","reject","signUp","then","value","error","login","logIn","response","logout","logOut","console","log","catch","err","getCurrent","current","Uploader","add","file","fileName","item","Object","avFile","File","set","save","serveFile","find","page","limit","query","Query","include","skip","descending","equalTo","results","this","currentUser","observable","action","name","values","passWord","UserStore","pullUser","resetUser","filename","newFile","isUpLoading","finally","newList","list","concat","isLoading","append","length","hasMore","message","success","context","createContext","AuthStore","ImageStore","HistoryStore","useStore","useContext","Text","StyledEntry","StyleNavLink","NavLink","Header","observer","history","useHistory","useEffect","to","activeClassName","exact","attributes","username","type","onClick","push","Main","Layout","props","children"],"mappings":"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","file":"static/js/9.a0ff4ba9.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Layout} from \"../Components/Layout\";\r\nimport styled, {keyframes} from \"styled-components\";\r\n\r\n\r\nconst fontColor = keyframes`\r\n  0%{color:red;}\r\n  50%{color:white;}\r\n  100%{color:red;}\r\n`;\r\nconst Wrapper = styled.div`\r\ndisplay: flex;\r\njustify-content: center;\r\nmargin: 50px auto;\r\nfont-size: 50px;\r\ncolor: red;\r\nanimation: linear infinite 2s ${fontColor};\r\n`;\r\n\r\nfunction About() {\r\n  return (\r\n    <Layout>\r\n      <Wrapper>\r\n        Panda图床好用！！！</Wrapper>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport {About};","import AV, {Query, User} from \"leancloud-storage\";\r\nimport {message} from 'antd'\r\n\r\nAV.init({\r\n  appId: \"YId6yG8LcyK0CGwLFaYIgYgf-gzGzoHsz\",\r\n  appKey: \"0IwcJacKUg9qaHmGBJrjwCC6\",\r\n  serverURL: \"https://yid6yg8l.lc-cn-n1-shared.com\"\r\n});\r\n\r\n\r\nconst Auth = {\r\n  register(userName: string, password: string) {\r\n    const user = new User();\r\n    user.setUsername(userName);\r\n    user.setPassword((password));\r\n    return new Promise((resolve, reject) => {\r\n      user.signUp().then(value => resolve(value), error => reject(error));\r\n    });\r\n  },\r\n  login(userName: string, password: string) {\r\n    return new Promise((resolve, reject) => {\r\n      User.logIn(userName, password).then(response => resolve(response), error => reject(error));\r\n    });\r\n  },\r\n  logout() {\r\n    User.logOut().then(() => {\r\n      console.log(\"注销成功\");\r\n    }).catch(err => console.log(err));\r\n  },\r\n  getCurrent() {\r\n    return User.current();\r\n  }\r\n};\r\n\r\nconst Uploader = {\r\n  add(file: File | null, fileName: string) {\r\n    const item = new AV.Object(\"Image\");\r\n    const avFile = new AV.File(fileName, file);\r\n    item.set(\"filename\", fileName);\r\n    item.set(\"owner\", AV.User.current());\r\n    item.set(\"url\", avFile);\r\n    return new Promise((resolve, reject) => {\r\n        item.save().then(serveFile => {\r\n          console.log(\"上传成功\");\r\n          resolve(serveFile);\r\n        }).catch(err => {\r\n          console.log(\"err\");\r\n          reject(err);\r\n        });\r\n      }\r\n    );\r\n  },\r\n  find({page=0, limit=10}) {\r\n    const query = new Query('Image');\r\n    query.include('owner');\r\n    query.limit(limit);\r\n    query.skip(page*limit);\r\n    query.descending('createdAt');\r\n    query.equalTo('owner', AV.User.current());\r\n    return new Promise((resolve, reject) => {\r\n      query.find()\r\n        .then(results => {\r\n          resolve(results);})\r\n        .catch(error => reject(error))\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport {Auth, Uploader};","import {observable, action} from \"mobx\";\r\nimport {Auth} from \"../Model/Controller\";\r\n\r\nclass UserStore {\r\n  @observable currentUser:any = null;\r\n\r\n  @action pullUser() {\r\n    this.currentUser = Auth.getCurrent();\r\n  }\r\n\r\n  @action resetUser() {\r\n    this.currentUser = null;\r\n  }\r\n}\r\n\r\nexport default new UserStore();","import {action, observable} from \"mobx\";\r\nimport UserStore from \"./User\";\r\nimport {Auth} from \"../Model/Controller\";\r\n\r\n\r\nclass AuthStore {\r\n  @observable values = {\r\n    userName: \"\",\r\n    passWord: \"\"\r\n  };\r\n\r\n\r\n  @action setUserName(name: string) {\r\n    this.values.userName = name;\r\n  }\r\n\r\n  @action setPassWorld(value: string) {\r\n    this.values.passWord = value;\r\n  }\r\n\r\n  @action Login() {\r\n    return new Promise((resolve, reject) => {\r\n      Auth.login(this.values.userName, this.values.passWord)\r\n        .then(user => {\r\n          UserStore.pullUser();\r\n          resolve(user);\r\n        }).catch(err => {\r\n        UserStore.resetUser();\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n  @action Register() {\r\n    return new Promise((resolve, reject) => {\r\n      Auth.register(this.values.userName, this.values.passWord)\r\n        .then(user => {\r\n          UserStore.pullUser();\r\n          resolve(user);\r\n        }).catch(err => {\r\n        UserStore.resetUser();\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n  @action logout() {\r\n    Auth.logout();\r\n    UserStore.resetUser();\r\n  }\r\n}\r\n\r\n\r\nexport default new AuthStore();","import {observable, action} from \"mobx\";\r\nimport {Uploader} from \"../Model/Controller\";\r\n\r\n\r\nclass Image {\r\n  @observable filename: string = \"\";\r\n  @observable file: File | null = null;\r\n  @observable serveFile: any = null;\r\n  @observable isUpLoading: boolean = false;\r\n\r\n  @action setFileName(name: string) {\r\n    this.filename = name;\r\n  }\r\n\r\n  @action setFile(newFile: File) {\r\n    this.file = newFile;\r\n  }\r\n\r\n  @action saveFile() {\r\n    this.isUpLoading = true;\r\n    return new Promise((resolve, reject) => {\r\n      Uploader.add(this.file, this.filename).then(serveFile => {\r\n        this.serveFile = serveFile;\r\n        resolve(serveFile)\r\n      }).catch(err => {\r\n        this.isUpLoading = false;\r\n        reject(err)\r\n      }).finally(() => this.isUpLoading = false);\r\n    });\r\n  }\r\n  @action reset() {\r\n    this.isUpLoading = false;\r\n    this.serveFile = null;\r\n  }\r\n}\r\n\r\nexport default  new Image()","import {action, observable} from \"mobx\";\r\nimport {Uploader} from \"../Model/Controller\";\r\nimport {message} from'antd'\r\n\r\nclass History {\r\n  @observable list = [];\r\n  @observable page = 0;\r\n  @observable isLoading = false;\r\n  @observable hasMore = true;\r\n  limit = 10;\r\n\r\n\r\n  @action append(newList: any) {\r\n    this.list = this.list.concat(newList);\r\n  }\r\n\r\n  @action find() {\r\n    this.isLoading = true;\r\n    Uploader.find({page: this.page, limit: this.limit})\r\n      .then(list => {\r\n        this.append(list);\r\n        this.page++;\r\n        // @ts-ignore\r\n        if (list.length < this.limit) {\r\n          this.hasMore = false;\r\n        }else{\r\n          message.success('加载成功')\r\n        }\r\n      })\r\n      .catch(err => {\r\n        message.error('加载失败')\r\n    })\r\n      .finally(() => {\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  @action reset() {\r\n    this.list = [];\r\n    this.isLoading = false;\r\n    this.hasMore = true;\r\n    this.page = 0;\r\n  }\r\n}\r\n\r\nexport default new History();","import {createContext, useContext} from \"react\";\r\nimport AuthStore from \"./Auth\";\r\nimport UserStore from './User';\r\nimport ImageStore from './Image'\r\nimport HistoryStore from \"./History\";\r\n\r\nconst context = createContext(\r\n  {\r\n    AuthStore ,\r\n    UserStore,\r\n    ImageStore,\r\n    HistoryStore\r\n\r\n  }\r\n);\r\nexport  const useStore = ()=> useContext(context)\r\n","import React, {useEffect,} from \"react\";\r\nimport {NavLink, useHistory} from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport {Button} from \"antd\";\r\nimport {useStore} from \"../Store\";\r\nimport {observer} from \"mobx-react\";\r\n\r\n\r\n\r\n\r\nconst Wrapper = styled.div`\r\ndisplay: flex;\r\ntext-align: center;\r\nalign-items: center;\r\npadding: 20px 120px ; \r\nbox-shadow: 2px 2px 2px 0 rgba(0,0,0,0.1);\r\n @media (max-width: 500px) {\r\n padding: 0 0 ;\r\n  }\r\n  @media (max-width: 300px){\r\n  font-size: 5px;\r\n}\r\n\r\n\r\n>a{\r\ntext-decoration:none;\r\nfont-size: 2em;\r\nmargin: 0 20px;\r\npadding: 0 10px ;\r\ncolor:black;\r\nborder-radius: 10px ;\r\n&.selected{\r\nbackground: #b8dbaa;\r\n}\r\n}\r\n`;\r\nconst Text = styled.div`\r\nfont-size: 50px;\r\ncolor: #4d57af;\r\n @media (max-width: 500px) {\r\n display: none;\r\n  }\r\n`;\r\nconst StyledEntry = styled.div`\r\nmargin-left: auto;\r\n @media (max-width: 500px) {\r\n margin: 0 0 ;\r\n padding: 0 0 ;\r\n  }\r\n\r\n>span{\r\nfont-size: 30px;\r\n}\r\n>Button{\r\nmargin: 0 20px;\r\nbackground:#b8dbaa;\r\nborder: none;\r\n }\r\n`;\r\n\r\nconst StyleNavLink = styled(NavLink)`\r\n:hover{\r\nbackground: #b8dbaa;\r\ncolor: black;\r\n}\r\n`\r\n\r\n\r\nconst Header = observer(() => {\r\n  const {AuthStore, UserStore} = useStore();\r\n  const history = useHistory();\r\n  const handleLogout = () => {\r\n    AuthStore.logout();\r\n    history.push(\"./login\");\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    history.push(\"./login\");\r\n  };\r\n  const handleRegister = () => {\r\n    history.push(\"./register\");\r\n  };\r\n  useEffect(() => {\r\n    UserStore.pullUser();\r\n  }, [UserStore]);\r\n  return (\r\n    <div>\r\n      <Wrapper>\r\n        <Text>Panda</Text>\r\n        <StyleNavLink to='/home' activeClassName='selected' exact>首页</StyleNavLink>\r\n        <StyleNavLink to='/history' activeClassName='selected'>上传历史</StyleNavLink>\r\n        <StyleNavLink to='/about' activeClassName='selected'>关于</StyleNavLink>\r\n        <StyledEntry>\r\n          {\r\n            UserStore.currentUser ?\r\n              <>\r\n                <span>{UserStore.currentUser.attributes.username}</span>\r\n                <Button type=\"primary\" onClick={handleLogout}> 注销 </Button>\r\n              </>\r\n              :\r\n              <>\r\n                <Button type=\"primary\" onClick={handleLogin}> 登录 </Button>\r\n                <Button type=\"primary\" onClick={handleRegister}> 注册 </Button>\r\n              </>\r\n          }\r\n        </StyledEntry>\r\n\r\n      </Wrapper>\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nexport {Header};","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {Header} from \"./Header\";\r\nimport {observer} from \"mobx-react\";\r\n\r\n\r\nconst Wrapper = styled.div`\r\nheight: 100vh;\r\ndisplay: flex;\r\nflex-direction: column-reverse;\r\noverflow: scroll;\r\n`;\r\nconst Main = styled.div`\r\nflex-grow: 1;\r\n`;\r\n\r\nconst Layout = observer((props: any) => {\r\n    return (\r\n      <Wrapper>\r\n        <Main>\r\n          {props.children}\r\n        </Main>\r\n        <Header/>\r\n      </Wrapper>\r\n    );\r\n  }\r\n);\r\n\r\nexport {Layout};"],"sourceRoot":""}